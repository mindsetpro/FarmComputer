<!DOCTYPE html>
<html>
    <head>
        <title>Stardew Valley Fan Communities</title>
        <meta charset="utf-8">
        <link rel="icon" href="assets/cojiro.png" type="image/png">
        <link rel="stylesheet" href="css/base.css" type="text/css">
        <link rel="stylesheet" href="css/index.css" type="text/css">

        <meta property="og:title" content="Stardew Valley Fan Communities" />
        <meta property="og:url" content="https://stardew.chat" />
        <meta property="og:image" content="assets/cojiro.png" />
        <meta property="og:description" content="Join the fan communities of the popular Stardew Valley video game!" />

    <script>
        function fetchLeaderboard(isMonthly) {
            const apiUrl = 'fetch_data.php'; // Replace with the actual path to your PHP script

            // Fetch data from your PHP script
            fetch(apiUrl)
                .then(response => response.json())
                .then(data => {
                    // Process the data and update the leaderboard
                    const filteredData = isMonthly ? data : data;
                    const leaderboardElement = document.getElementById(isMonthly ? 'monthly' : 'alltime');
                    leaderboardElement.innerHTML = '';

                    filteredData.forEach(entry => {
                        const listItem = document.createElement('li');
                        listItem.textContent = `${entry.username} - Score: ${entry.msgCount}`;
                        leaderboardElement.appendChild(listItem);
                    });
                })
                .catch(error => console.error('Error fetching data:', error));
        }

        document.addEventListener('DOMContentLoaded', function () {
            // Initial fetch for monthly leaderboard
            fetchLeaderboard(true);
        });
    </script>
</head>
    <body>
        <div class="center">
            <header>
                <h1>Stardew Valley Fan Communities</h1>
            </header>
            <img src="assets/main_logo.png">
            <h2>Enjoy a peaceful trip to Pelican Town</h2>
            <img src="assets/pufferfish.png"><img src="assets/pufferfish.png"><img src="assets/pufferfish.png">
        </div>
    <div class="tab">
        <button class="tabbtn" id="monthlybtn" onclick="fetchLeaderboard(true)">This Month</button>
        <button class="tabbtn" id="alltimebtn" onclick="fetchLeaderboard(false)">All-Time</button>
    </div>
    <div id="monthly" class="tabcontent">
        <ul></ul>
    </div>
    <div id="alltime" class="tabcontent">
        <ul></ul>
    </div>
        <div class="list">
            <h3>Come join the friendly fan communities of Stardew Valley!</h3>
            <ul>
                <li>Haven't played yet? Learn more about the game <a href="https://stardewvalley.net">here!</a></li>
                <li>Join the official <a href="https://discord.gg/stardewvalley">Stardew Valley Discord</a> and chat with other fans of the game!</li>
                <ul>
                    <li>Already a member? View the <a href="leaderboard.php">Discord leaderboard</a> to see our most active members!</li>
                </ul>
                <li>Looking to spice things up with some <a href="https://www.nexusmods.com/stardewvalley/">mods?</a></li>
                <li>Or perhaps create your own with <a href="https://smapi.io">SMAPI!</a></li>
                <li>Discuss the game in the <a href="https://forums.stardewvalley.net/">forums!</a></li>
                <li>Join the <a href="https://reddit.com/r/stardewvalley">subreddit.</a></li>
                <li>Visit the <a href="https://http://steamcommunity.com/app/413150/discussions/">Steam discussion board</a></li>
            </ul>
        </div>
        <div class="center">
            <img src="assets/pufferparty.png"><img src="assets/pufferparty.png"><img src="assets/pufferparty.png">
            <br/>
            <iframe src="https://discordapp.com/widget?id=137344473976799233&theme=dark" width="350" height="500" allowtransparency="true" frameborder="0" sandbox="allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts"></iframe>
            <br/>
            <img src="assets/puffercrown.png"><img src="assets/puffercrown.png"><img src="assets/puffercrown.png">
            <span id="footer">
                <p>View <a href="https://github.com/aquova/governor">source code</a></p>
                <p>Webpage &copy; aquova 2020-2023</p>
                <p>Stardew Valley created by ConcernedApe LLC</p>
            </span>
        </div>
    <script src="js/tabs.js"></script>
</body>
</html>
